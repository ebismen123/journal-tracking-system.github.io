<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeruk Manis ATS - Article Journal Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .orange-gradient {
            background: linear-gradient(135deg, #ff8c00 0%, #ffa500 100%);
        }
        .orange-shadow {
            box-shadow: 0 4px 20px rgba(255, 140, 0, 0.3);
        }
        .orange-border {
            border: 2px solid #ff8c00;
        }
        .orange-text-gradient {
            background: linear-gradient(to right, #ff8c00, #ff5e00);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .urgent {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.5); }
            70% { box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
        }
    </style>
</head>
<body class="min-h-screen bg-gray-50" style="background-image: url('https://img.freepik.com/premium-vector/seamless-pattern-with-white-outline-oranges-fruit-citrus-orange-color-background_528213-749.jpg'); background-size: 500px; background-repeat: repeat;">
    <!-- Header with Logo -->
    <header class="orange-gradient text-white py-4 px-6 shadow-lg sticky top-0 z-40">
        <div class="container mx-auto flex flex-col md:flex-row items-center justify-between">
            <div class="flex items-center mb-4 md:mb-0">
                <img src="https://img.icons8.com/?size=100&id=XxRdzBNPGyUO&format=png&color=FFFFFF" alt="Orange" class="h-8 w-auto mr-3">
                <h1 class="text-2xl md:text-3xl font-bold">Jeruk Manis</h1>
            </div>
            <div class="flex items-center">
                <p class="hidden md:block italic">Article Tracking System</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto py-8 px-4">
        <div class="flex flex-col lg:flex-row gap-8">
            <!-- Form Section -->
            <section class="w-full lg:w-1/3 bg-white rounded-xl shadow-lg orange-border p-6 h-fit">
                <h2 class="text-2xl font-bold mb-6 orange-text-gradient">Journal Submission Form</h2>
                
                <form id="journalForm" class="space-y-4">
                    <div>
                        <label for="entryDate" class="block text-sm font-medium text-gray-700">Tanggal Artikel Masuk</label>
                        <input type="date" id="entryDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                    </div>
                    
                    <div>
                        <label for="authorName" class="block text-sm font-medium text-gray-700">Nama Penulis</label>
                        <input type="text" id="authorName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                    </div>
                    
                    <div>
                        <label for="affiliation" class="block text-sm font-medium text-gray-700">Afiliasi</label>
                        <input type="text" id="affiliation" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                    </div>
                    
                    <div>
                        <label for="title" class="block text-sm font-medium text-gray-700">Judul Artikel</label>
                        <textarea id="title" rows="2" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border"></textarea>
                    </div>
                    
                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700">No HP</label>
                        <input type="tel" id="phone" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                    </div>

                    <div>
                        <label for="publicationType" class="block text-sm font-medium text-gray-700">Jenis Publikasi</label>
                        <select id="publicationType" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                            <option value="Reguler">Reguler (8 Hari)</option>
                            <option value="Fast Track">Fast Track (2 Hari)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="journalTarget" class="block text-sm font-medium text-gray-700">Jurnal yang Dituju</label>
                        <select id="journalTarget" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                            <option value="">Pilih Jurnal</option>
                            <option value="EBISMEN">EBISMEN</option>
                            <option value="WAWASAN">WAWASAN</option>
                            <option value="PROFIT">PROFIT</option>
                            <option value="POPULER">POPULER</option>
                            <option value="SIDU">SIDU</option>
                            <option value="INSDU">INSDU</option>
                            <option value="OCEAN">OCEAN</option>
                            <option value="KTI">KTI</option>
                        </select>
                    </div>
                    
                    <div>
                        <label for="deadline" class="block text-sm font-medium text-gray-700">Tanggal Deadline</label>
                        <input type="date" id="deadline" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border bg-gray-100" readonly>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Proses</label>
                        <div class="mt-2 space-y-2">
                            <div class="flex items-center">
                                <input id="notSubmitted" name="process" type="radio" value="Belum submit" checked class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="notSubmitted" class="ml-2 block text-sm text-gray-700">Belum submit</label>
                            </div>
                            <div class="flex items-center">
                                <input id="submitted" name="process" type="radio" value="Sudah disubmit" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="submitted" class="ml-2 block text-sm text-gray-700">Sudah disubmit</label>
                            </div>
                            <div class="flex items-center">
                                <input id="review" name="process" type="radio" value="Review" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="review" class="ml-2 block text-sm text-gray-700">Review</label>
                            </div>
                            <div class="flex items-center">
                                <input id="editing" name="process" type="radio" value="Editing" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="editing" class="ml-2 block text-sm text-gray-700">Editing</label>
                            </div>
                            <div class="flex items-center">
                                <input id="loaTerbit" name="process" type="radio" value="LoA sudah terbit" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="loaTerbit" class="ml-2 block text-sm text-gray-700">LoA sudah terbit</label>
                            </div>
                            <div class="flex items-center">
                                <input id="publish" name="process" type="radio" value="Publish" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="publish" class="ml-2 block text-sm text-gray-700">Publish</label>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Status Pembayaran</label>
                        <div class="mt-2 space-y-2">
                            <div class="flex items-center">
                                <input id="paid" name="payment" type="radio" value="Sudah Bayar" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="paid" class="ml-2 block text-sm text-gray-700">Sudah Bayar</label>
                            </div>
                            <div class="flex items-center">
                                <input id="notPaid" name="payment" type="radio" value="Belum Bayar" checked class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                <label for="notPaid" class="ml-2 block text-sm text-gray-700">Belum Bayar</label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="pt-4">
                        <button type="submit" class="w-full orange-gradient text-white py-2 px-4 rounded-md hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 font-medium transition-opacity">
                            <i class="fas fa-save mr-2"></i> Simpan Data
                        </button>
                    </div>
                </form>
            </section>
            
            <!-- Report Section -->
            <section class="w-full lg:w-2/3">
                <div class="bg-white rounded-xl shadow-lg orange-border p-6">
                    <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4">
                        <h2 class="text-2xl font-bold orange-text-gradient">Journal Tracking Report</h2>
                        <div class="flex items-center bg-orange-100 px-3 py-1 rounded-full flex-shrink-0">
                            <i class="fas fa-chart-line text-orange-500 mr-2"></i>
                            <span class="text-sm font-medium text-orange-800">Live Data</span>
                        </div>
                    </div>

                    <!-- Filters -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-4">
                        <div class="relative md:col-span-4">
                            <input type="text" id="searchInput" placeholder="Cari berdasarkan nama penulis atau judul..." class="w-full pl-10 pr-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:border-orange-500">
                            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                <i class="fas fa-search text-gray-400"></i>
                            </div>
                        </div>
                        
                        <select id="filterType" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500">
                            <option value="">Semua Jenis Publikasi</option>
                            <option value="Reguler">Reguler</option>
                            <option value="Fast Track">Fast Track</option>
                        </select>
                        <select id="filterJournal" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500">
                             <option value="">Semua Jurnal</option>
                            <option value="EBISMEN">EBISMEN</option>
                            <option value="WAWASAN">WAWASAN</option>
                            <option value="PROFIT">PROFIT</option>
                            <option value="POPULER">POPULER</option>
                            <option value="SIDU">SIDU</option>
                            <option value="INSDU">INSDU</option>
                            <option value="OCEAN">OCEAN</option>
                            <option value="KTI">KTI</option>
                        </select>
                        <select id="filterStatus" class="w-full py-2 px-3 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-orange-500">
                            <option value="">Semua Status</option>
                            <option value="Belum submit">Belum submit</option>
                            <option value="Sudah disubmit">Sudah disubmit</option>
                            <option value="Review">Review</option>
                            <option value="Editing">Editing</option>
                            <option value="LoA sudah terbit">LoA sudah terbit</option>
                            <option value="Publish">Publish</option>
                        </select>
                        <button id="resetFilters" class="w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 font-medium">Reset</button>
                    </div>

                    <div class="overflow-auto" style="max-height: 70vh;">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-orange-50 sticky top-0 z-10">
                                <tr>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider">Penulis</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider">Judul</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider">Jenis</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider">Jurnal</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider">Deadline</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider">Status</th>
                                    <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-orange-800 uppercase tracking-wider">Aksi</th>
                                </tr>
                            </thead>
                            <tbody id="journalList" class="bg-white divide-y divide-gray-200">
                                <!-- Data will be inserted here by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="noData" class="text-center py-8 hidden">
                        <i class="fas fa-book-open text-4xl text-orange-300 mb-4"></i>
                        <h3 class="text-lg font-medium text-gray-700">Belum ada data jurnal</h3>
                        <p class="text-gray-500 mt-1">Mulai dengan menambahkan data jurnal melalui form di samping</p>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Modal for Edit -->
    <div id="editModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4" id="modalTitle">Edit Data Jurnal</h3>
                    <form id="editForm">
                        <input type="hidden" id="editId">
                        <div class="space-y-4 max-h-[60vh] overflow-y-auto pr-2">
                            <div class="mb-4">
                                <label for="editEntryDate" class="block text-sm font-medium text-gray-700">Tanggal Artikel Masuk</label>
                                <input type="date" id="editEntryDate" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                            </div>
                            
                            <div class="mb-4">
                                <label for="editAuthorName" class="block text-sm font-medium text-gray-700">Nama Penulis</label>
                                <input type="text" id="editAuthorName" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                            </div>
                            
                            <div class="mb-4">
                                <label for="editAffiliation" class="block text-sm font-medium text-gray-700">Afiliasi</label>
                                <input type="text" id="editAffiliation" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                            </div>
                            
                            <div class="mb-4">
                                <label for="editTitle" class="block text-sm font-medium text-gray-700">Judul Artikel</label>
                                <textarea id="editTitle" rows="2" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border"></textarea>
                            </div>
                            
                            <div class="mb-4">
                                <label for="editPhone" class="block text-sm font-medium text-gray-700">No HP</label>
                                <input type="tel" id="editPhone" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                            </div>

                            <div class="mb-4">
                                <label for="editPublicationType" class="block text-sm font-medium text-gray-700">Jenis Publikasi</label>
                                <select id="editPublicationType" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                                    <option value="Reguler">Reguler (8 Hari)</option>
                                    <option value="Fast Track">Fast Track (2 Hari)</option>
                                </select>
                            </div>
                            
                            <div class="mb-4">
                                <label for="editJournalTarget" class="block text-sm font-medium text-gray-700">Jurnal yang Dituju</label>
                                <select id="editJournalTarget" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border">
                                    <option value="">Pilih Jurnal</option>
                                    <option value="EBISMEN">EBISMEN</option>
                                    <option value="WAWASAN">WAWASAN</option>
                                    <option value="PROFIT">PROFIT</option>
                                    <option value="POPULER">POPULER</option>
                                    <option value="SIDU">SIDU</option>
                                    <option value="INSDU">INSDU</option>
                                    <option value="OCEAN">OCEAN</option>
                                    <option value="KTI">KTI</option>
                                </select>
                            </div>
                            
                            <div class="mb-4">
                                <label for="editDeadline" class="block text-sm font-medium text-gray-700">Tanggal Deadline</label>
                                <input type="date" id="editDeadline" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring focus:ring-orange-200 p-2 border bg-gray-100" readonly>
                            </div>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700">Proses</label>
                                <div class="mt-2 space-y-2">
                                     <div class="flex items-center">
                                        <input id="editNotSubmitted" name="editProcess" type="radio" value="Belum submit" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editNotSubmitted" class="ml-2 block text-sm text-gray-700">Belum submit</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input id="editSubmitted" name="editProcess" type="radio" value="Sudah disubmit" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editSubmitted" class="ml-2 block text-sm text-gray-700">Sudah disubmit</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input id="editReview" name="editProcess" type="radio" value="Review" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editReview" class="ml-2 block text-sm text-gray-700">Review</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input id="editEditing" name="editProcess" type="radio" value="Editing" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editEditing" class="ml-2 block text-sm text-gray-700">Editing</label>
                                    </div>
                                     <div class="flex items-center">
                                        <input id="editLoaTerbit" name="editProcess" type="radio" value="LoA sudah terbit" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editLoaTerbit" class="ml-2 block text-sm text-gray-700">LoA sudah terbit</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input id="editPublish" name="editProcess" type="radio" value="Publish" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editPublish" class="ml-2 block text-sm text-gray-700">Publish</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <label class="block text-sm font-medium text-gray-700">Status Pembayaran</label>
                                <div class="mt-2 space-y-2">
                                    <div class="flex items-center">
                                        <input id="editPaid" name="editPayment" type="radio" value="Sudah Bayar" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editPaid" class="ml-2 block text-sm text-gray-700">Sudah Bayar</label>
                                    </div>
                                    <div class="flex items-center">
                                        <input id="editNotPaid" name="editPayment" type="radio" value="Belum Bayar" class="h-4 w-4 text-orange-600 focus:ring-orange-500">
                                        <label for="editNotPaid" class="ml-2 block text-sm text-gray-700">Belum Bayar</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" id="saveEdit" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 orange-gradient text-base font-medium text-white hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:ml-3 sm:w-auto sm:text-sm transition-opacity">
                        <i class="fas fa-save mr-2"></i> Simpan Perubahan
                    </button>
                    <button type="button" id="cancelEdit" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        <i class="fas fa-times mr-2"></i> Batal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10">
                            <i class="fas fa-exclamation-triangle text-red-600"></i>
                        </div>
                        <div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modalTitle">Konfirmasi Hapus</h3>
                            <div class="mt-2">
                                <p class="text-sm text-gray-500">Apakah Anda yakin ingin menghapus data jurnal ini? Tindakan ini tidak dapat dibatalkan.</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" id="confirmDelete" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm">
                        <i class="fas fa-trash mr-2"></i> Ya, Hapus
                    </button>
                    <button type="button" id="cancelDelete" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        <i class="fas fa-times mr-2"></i> Batal
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-orange-900 text-white py-6 mt-8">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <div class="flex items-center">
                        <i class="fas fa-book text-2xl mr-2"></i>
                        <span class="text-xl font-bold">Jeruk Manis ATS</span>
                    </div>
                    <p class="text-orange-200 mt-1">Aplikasi Khusus Buat Editor Jurnal</p>
                </div>
                <div class="flex space-x-4">
                    <a href="#" class="text-orange-200 hover:text-white">
                        <i class="fab fa-whatsapp text-xl"></i>
                    </a>
                    <a href="#" class="text-orange-200 hover:text-white">
                        <i class="fas fa-envelope text-xl"></i>
                    </a>
                    <a href="#" class="text-orange-200 hover:text-white">
                        <i class="fas fa-phone text-xl"></i>
                    </a>
                </div>
            </div>
            <div class="border-t border-orange-800 mt-4 pt-4 text-center text-orange-300 text-sm">
                &copy; 2025 Jeruk Manis ATS - Journal Tracker. All rights reserved.
            </div>
        </div>
    </footer>

    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAA5ylO4TMtGnnPhrm1vGUDF6AafNSrOUQ",
            authDomain: "orange-journal-tracker.firebaseapp.com",
            databaseURL: "https://orange-journal-tracker-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "orange-journal-tracker",
            storageBucket: "orange-journal-tracker.appspot.com",
            messagingSenderId: "430973783779",
            appId: "1:430973783779:web:bc1ccf3b75ce8144fcffd6"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const journalsRef = database.ref('journals');

        // --- DOM Elements ---
        const journalForm = document.getElementById('journalForm');
        const journalList = document.getElementById('journalList');
        const noData = document.getElementById('noData');
        const searchInput = document.getElementById('searchInput');
        const editModal = document.getElementById('editModal');
        const saveEdit = document.getElementById('saveEdit');
        const cancelEdit = document.getElementById('cancelEdit');
        const editId = document.getElementById('editId');
        const confirmModal = document.getElementById('confirmModal');
        const confirmDelete = document.getElementById('confirmDelete');
        const cancelDelete = document.getElementById('cancelDelete');
        
        // Form elements for auto-deadline
        const entryDateInput = document.getElementById('entryDate');
        const publicationTypeInput = document.getElementById('publicationType');
        const deadlineInput = document.getElementById('deadline');
        const editEntryDateInput = document.getElementById('editEntryDate');
        const editPublicationTypeInput = document.getElementById('editPublicationType');
        const editDeadlineInput = document.getElementById('editDeadline');
        
        // Filter elements
        const filterType = document.getElementById('filterType');
        const filterJournal = document.getElementById('filterJournal');
        const filterStatus = document.getElementById('filterStatus');
        const resetFiltersBtn = document.getElementById('resetFilters');

        // --- Functions ---

        /**
         * Updates the deadline date based on the entry date and publication type.
         * @param {HTMLInputElement} entryDateElem - The entry date input element.
         * @param {HTMLSelectElement} publicationTypeElem - The publication type select element.
         * @param {HTMLInputElement} deadlineElem - The deadline input element to update.
         */
        function updateDeadline(entryDateElem, publicationTypeElem, deadlineElem) {
            const entryDateValue = entryDateElem.value;
            if (!entryDateValue) return;

            const entryDate = new Date(entryDateValue);
            const publicationType = publicationTypeElem.value;
            const daysToAdd = publicationType === 'Fast Track' ? 2 : 8;
            
            entryDate.setDate(entryDate.getDate() + daysToAdd);
            deadlineElem.value = entryDate.toISOString().split('T')[0];
        }

        /**
         * Handles the main form submission.
         * @param {Event} e - The form submission event.
         */
        function handleFormSubmit(e) {
            e.preventDefault();
            
            const newJournalData = {
                entryDate: document.getElementById('entryDate').value,
                authorName: document.getElementById('authorName').value,
                affiliation: document.getElementById('affiliation').value,
                title: document.getElementById('title').value,
                phone: document.getElementById('phone').value,
                publicationType: document.getElementById('publicationType').value,
                journalTarget: document.getElementById('journalTarget').value,
                deadline: document.getElementById('deadline').value,
                process: document.querySelector('input[name="process"]:checked').value,
                payment: document.querySelector('input[name="payment"]:checked').value,
                createdAt: firebase.database.ServerValue.TIMESTAMP
            };
            
            journalsRef.push(newJournalData);
            
            journalForm.reset();
            document.getElementById('notSubmitted').checked = true;
            document.getElementById('notPaid').checked = true;
            initializeDateFields();
            
            alert('Data jurnal berhasil disimpan!');
        }

        /**
         * Renders the list of journals from Firebase data.
         * @param {DataSnapshot} snapshot - The Firebase data snapshot.
         */
        function renderJournalList(snapshot) {
            journalList.innerHTML = '';
            const journals = snapshot.val();
            
            if (!journals) {
                noData.classList.remove('hidden');
                return;
            }
            
            noData.classList.add('hidden');
            
            const journalsArray = Object.keys(journals).map(key => ({
                id: key,
                ...journals[key]
            }));
            
            // Sort by priority: unfinished items first, then by closest deadline
            journalsArray.sort((a, b) => {
                const aIsDone = a.process === 'Publish';
                const bIsDone = b.process === 'Publish';

                if (aIsDone && !bIsDone) return 1;
                if (!aIsDone && bIsDone) return -1;

                const aDeadline = new Date(a.deadline).getTime();
                const bDeadline = new Date(b.deadline).getTime();
                return aDeadline - bDeadline;
            });
            
            journalsArray.forEach(journal => {
                const row = createJournalRow(journal.id, journal);
                journalList.appendChild(row);
            });
            applyFilters();
        }

        /**
         * Creates a table row element for a single journal entry.
         * @param {string} key - The Firebase key for the journal.
         * @param {object} journal - The journal data object.
         * @returns {HTMLTableRowElement} The created table row.
         */
        function createJournalRow(key, journal) {
            const row = document.createElement('tr');
            row.className = 'hover:bg-orange-50 bg-white bg-opacity-90 transition-colors';
            row.dataset.id = key;
            row.dataset.author = journal.authorName.toLowerCase();
            row.dataset.title = journal.title.toLowerCase();
            row.dataset.type = journal.publicationType;
            row.dataset.journal = journal.journalTarget;
            row.dataset.status = journal.process;

            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const deadlineDate = new Date(journal.deadline);
            const timeDiff = deadlineDate.getTime() - today.getTime();
            const daysDiff = Math.ceil(timeDiff / (1000 * 3600 * 24));
            const isUrgent = daysDiff <= 2 && daysDiff >= 0 && journal.process !== 'Publish';
            
            let statusClass = '';
            switch(journal.process) {
                case 'Sudah disubmit': statusClass = 'bg-blue-100 text-blue-800'; break;
                case 'Belum submit': statusClass = 'bg-gray-100 text-gray-800'; break;
                case 'Review': statusClass = 'bg-yellow-100 text-yellow-800'; break;
                case 'Editing': statusClass = 'bg-purple-100 text-purple-800'; break;
                case 'LoA sudah terbit': statusClass = 'bg-cyan-100 text-cyan-800'; break;
                case 'Publish': statusClass = 'bg-green-100 text-green-800'; break;
            }
            
            const paymentClass = journal.payment === 'Sudah Bayar' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800';
            const typeClass = journal.publicationType === 'Fast Track' ? 'bg-indigo-100 text-indigo-800' : 'bg-pink-100 text-pink-800';
            
            let deadlineCell = '';
            if (isUrgent) {
                deadlineCell = `<div class="flex items-center font-semibold text-red-600"><span class="mr-2">${journal.deadline}</span><span class="h-2 w-2 rounded-full bg-red-500 urgent"></span></div>`;
            } else if (daysDiff < 0 && journal.process !== 'Publish') {
                deadlineCell = `<div class="flex items-center text-red-500 font-semibold"><span class="mr-2">${journal.deadline}</span><span class="text-xs">(Terlewat)</span></div>`;
            } else {
                deadlineCell = journal.deadline;
            }
            
            row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 h-10 w-10 rounded-full bg-orange-100 flex items-center justify-center"><i class="fas fa-user text-orange-500"></i></div>
                        <div class="ml-4">
                            <div class="text-sm font-medium text-gray-900">${journal.authorName}</div>
                            <div class="text-sm text-gray-500">${journal.affiliation}</div>
                        </div>
                    </div>
                </td>
                <td class="px-6 py-4">
                    <div class="text-sm text-gray-900 font-medium" title="${journal.title}">${journal.title.substring(0, 30)}${journal.title.length > 30 ? '...' : ''}</div>
                    <div class="text-xs text-gray-500">Masuk: ${journal.entryDate}</div>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                     <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${typeClass}">${journal.publicationType}</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-orange-100 text-orange-800">${journal.journalTarget}</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${deadlineCell}</td>
                <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${statusClass}">${journal.process}</span>
                    <span class="mt-1 block px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${paymentClass}">${journal.payment}</span>
                </td>
                <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                    <div class="flex space-x-2">
                        <button onclick="openEditModal('${key}')" class="text-orange-600 hover:text-orange-900" title="Edit"><i class="fas fa-edit"></i></button>
                        <a href="https://wa.me/${journal.phone.replace(/^0/, '62')}" target="_blank" class="text-green-600 hover:text-green-900" title="WhatsApp"><i class="fab fa-whatsapp"></i></a>
                        <button onclick="createLOA('${journal.journalTarget}')" class="text-blue-600 hover:text-blue-900" title="Buat LoA"><i class="fas fa-file-alt"></i></button>
                        <button onclick="showDeleteConfirm('${key}')" class="text-red-600 hover:text-red-900" title="Hapus"><i class="fas fa-trash"></i></button>
                    </div>
                </td>
            `;
            return row;
        }

        /**
         * Opens and populates the edit modal.
         * @param {string} id - The Firebase key of the journal to edit.
         */
        window.openEditModal = function(id) {
            journalsRef.child(id).once('value', (snapshot) => {
                const journal = snapshot.val();
                if (!journal) return;
                
                editId.value = id;
                document.getElementById('editEntryDate').value = journal.entryDate;
                document.getElementById('editAuthorName').value = journal.authorName;
                document.getElementById('editAffiliation').value = journal.affiliation;
                document.getElementById('editTitle').value = journal.title;
                document.getElementById('editPhone').value = journal.phone;
                document.getElementById('editPublicationType').value = journal.publicationType || 'Reguler'; // Default to Reguler if not set
                document.getElementById('editJournalTarget').value = journal.journalTarget;
                document.getElementById('editDeadline').value = journal.deadline;
                document.querySelector(`input[name="editProcess"][value="${journal.process}"]`).checked = true;
                document.querySelector(`input[name="editPayment"][value="${journal.payment}"]`).checked = true;
                
                editModal.classList.remove('hidden');
            });
        }

        /**
         * Saves the changes from the edit modal.
         */
        function handleSaveEdit() {
            const id = editId.value;
            const updatedData = {
                entryDate: document.getElementById('editEntryDate').value,
                authorName: document.getElementById('editAuthorName').value,
                affiliation: document.getElementById('editAffiliation').value,
                title: document.getElementById('editTitle').value,
                phone: document.getElementById('editPhone').value,
                publicationType: document.getElementById('editPublicationType').value,
                journalTarget: document.getElementById('editJournalTarget').value,
                deadline: document.getElementById('editDeadline').value,
                process: document.querySelector('input[name="editProcess"]:checked').value,
                payment: document.querySelector('input[name="editPayment"]:checked').value
            };
            
            journalsRef.child(id).update(updatedData, (error) => {
                if (error) {
                    alert('Gagal memperbarui data: ' + error.message);
                } else {
                    editModal.classList.add('hidden');
                    alert('Data berhasil diperbarui!');
                }
            });
        }

        /**
         * Shows the delete confirmation modal.
         * @param {string} id - The Firebase key of the journal to delete.
         */
        window.showDeleteConfirm = function(id) {
            confirmModal.dataset.id = id;
            confirmModal.classList.remove('hidden');
        }

        /**
         * Handles the final deletion of a journal entry.
         */
        function handleDeleteConfirm() {
            const id = confirmModal.dataset.id;
            journalsRef.child(id).remove()
                .then(() => {
                    confirmModal.classList.add('hidden');
                    alert('Data berhasil dihapus!');
                })
                .catch(error => {
                    alert('Gagal menghapus data: ' + error.message);
                });
        }

        /**
         * Applies all active filters to the journal list.
         */
        function applyFilters() {
            const searchTerm = searchInput.value.toLowerCase();
            const typeFilter = filterType.value;
            const journalFilter = filterJournal.value;
            const statusFilter = filterStatus.value;
            
            const rows = journalList.querySelectorAll('tr');
            
            rows.forEach(row => {
                const searchMatch = row.dataset.author.includes(searchTerm) || row.dataset.title.includes(searchTerm);
                const typeMatch = !typeFilter || row.dataset.type === typeFilter;
                const journalMatch = !journalFilter || row.dataset.journal === journalFilter;
                const statusMatch = !statusFilter || row.dataset.status === statusFilter;

                row.style.display = (searchMatch && typeMatch && journalMatch && statusMatch) ? '' : 'none';
            });
        }

        /**
         * Opens a Google Docs template for creating a Letter of Acceptance.
         * @param {string} journal - The name of the journal.
         */
        window.createLOA = function(journal) {
            const templates = {
                'EBISMEN': 'https://docs.google.com/document/d/your-template-id-here/copy',
                'WAWASAN': 'https://docs.google.com/document/d/your-template-id-here/copy',
                // Add other template URLs here, using the /copy endpoint to force a new document
            };
            
            if (templates[journal]) {
                window.open(templates[journal], '_blank');
            } else {
                alert('Template LoA untuk jurnal ini belum tersedia.');
            }
        }

        /**
         * Initializes the date fields in the main form.
         */
        function initializeDateFields() {
            const today = new Date().toISOString().split('T')[0];
            entryDateInput.value = today;
            updateDeadline(entryDateInput, publicationTypeInput, deadlineInput);
        }

        // --- Event Listeners ---
        journalForm.addEventListener('submit', handleFormSubmit);
        saveEdit.addEventListener('click', handleSaveEdit);
        confirmDelete.addEventListener('click', handleDeleteConfirm);

        // Modal close buttons
        cancelDelete.addEventListener('click', () => confirmModal.classList.add('hidden'));
        cancelEdit.addEventListener('click', () => editModal.classList.add('hidden'));

        // Auto-deadline listeners
        entryDateInput.addEventListener('change', () => updateDeadline(entryDateInput, publicationTypeInput, deadlineInput));
        publicationTypeInput.addEventListener('change', () => updateDeadline(entryDateInput, publicationTypeInput, deadlineInput));
        editEntryDateInput.addEventListener('change', () => updateDeadline(editEntryDateInput, editPublicationTypeInput, editDeadlineInput));
        editPublicationTypeInput.addEventListener('change', () => updateDeadline(editEntryDateInput, editPublicationTypeInput, editDeadlineInput));
        
        // Filter listeners
        searchInput.addEventListener('input', applyFilters);
        filterType.addEventListener('change', applyFilters);
        filterJournal.addEventListener('change', applyFilters);
        filterStatus.addEventListener('change', applyFilters);
        resetFiltersBtn.addEventListener('click', () => {
            searchInput.value = '';
            filterType.value = '';
            filterJournal.value = '';
            filterStatus.value = '';
            applyFilters();
        });
        
        // Initial data load from Firebase
        journalsRef.on('value', renderJournalList, (error) => {
            console.error("Firebase read failed: " + error.name);
            alert("Gagal memuat data dari database. Periksa koneksi internet Anda.");
        });
        
        // Initialize on page load
        window.onload = initializeDateFields;
    </script>
</body>
</html>
